{"version":3,"sources":["db.js"],"names":["_mongoose","_interopRequireDefault","require","_jsonwebtoken","connectDb","mongoose","connect","then","res","console","log","concat","connection","host","err","LoggedInUserOnly","req","next","token","cookies","json","jwt","verify","user","decodedData","userId"],"mappings":"sHAAA,IAAAA,UAAAC,uBAAAC,QAAA,aACAC,cAAAF,uBAAAC,QAAA,yFAEA,IAAME,UAAY,WACbC,UAAAA,QAASC,QAAQ,uCAAuCC,KAAK,SAACC,GAC3DC,QAAQC,IAAR,oCAAAC,OAAgDH,EAAII,WAAWC,SADlE,MAEQ,SAACC,GANdL,QAAAC,IAAA,8DAAAI,kCAWO,IAAMC,iBAAmB,SAACC,EAAIR,EAAIS,GACrC,IAAMC,EAASF,EAAIG,QAAQ,cATzBf,IAAAA,EAAS,OAAGI,EAAZJ,OAAAA,KAAiBgB,KAAA,CAClBf,SAAAA,EACGI,QAAA,qCAEAA,IAAAA,EAAAY,cAAAA,QAAAC,OAAAJ,EAAA,mBAHHF,EAAAO,KAAAC,EAAAC,OAgBDR","file":"db.min.js","sourcesContent":["import mongoose from \"mongoose\";\r\nimport jwt from 'jsonwebtoken'\r\n\r\nconst connectDb = () =>{\r\n     mongoose.connect(\"mongodb://127.0.0.1:27017/sunidhiDb\").then((res)=>{\r\n        console.log(`Database is connected with host:-${res.connection.host}`)\r\n    }).catch((err)=>{\r\n        console.log(`************** Database is not connected ***************** `,err)\r\n    })\r\n};\r\n\r\nexport const LoggedInUserOnly = (req,res,next)=>{\r\n    const token  = req.cookies[\"test-token\"];\r\n    if(!token) return res.status(401).json({\r\n        success:false,\r\n        message:\"Unauthorized user,please login !\"\r\n    })\r\n    const decodedData = jwt.verify(token,\"your-secret-key\")\r\n    req.user = decodedData.userId;\r\n\r\n    next()\r\n}\r\n\r\n\r\n \r\n\r\nexport {\r\n    connectDb\r\n}"]}