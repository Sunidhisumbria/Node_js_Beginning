{"version":3,"sources":["db.js"],"names":["connectDb","mongoose","connect","then","res","console","log","connection","host","err","LoggedInUserOnly","req","next","token","cookies","status","json","success","message","decodedData","jwt","verify","user","userId"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,IAAMA,SAAS,GAAG,SAAZA,SAAY,GAAK;AAClBC,uBAASC,OAAT,CAAiB,qCAAjB,EAAwDC,IAAxD,CAA6D,UAACC,GAAD,EAAO;AACjEC,IAAAA,OAAO,CAACC,GAAR,4CAAgDF,GAAG,CAACG,UAAJ,CAAeC,IAA/D;AACH,GAFA,WAEQ,UAACC,GAAD,EAAO;AACZJ,IAAAA,OAAO,CAACC,GAAR,gEAA0EG,GAA1E;AACH,GAJA;AAKJ,CAND;;;;AAQO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,GAAD,EAAKP,GAAL,EAASQ,IAAT,EAAgB;AAC5C,MAAMC,KAAK,GAAIF,GAAG,CAACG,OAAJ,CAAY,YAAZ,CAAf;AACA,MAAG,CAACD,KAAJ,EAAW,OAAOT,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnCC,IAAAA,OAAO,EAAC,KAD2B;AAEnCC,IAAAA,OAAO,EAAC;AAF2B,GAArB,CAAP;;AAIX,MAAMC,WAAW,GAAGC,yBAAIC,MAAJ,CAAWR,KAAX,EAAiB,iBAAjB,CAApB;;AACAF,EAAAA,GAAG,CAACW,IAAJ,GAAWH,WAAW,CAACI,MAAvB;AAEAX,EAAAA,IAAI;AACP,CAVM","sourcesContent":["import mongoose from \"mongoose\";\r\nimport jwt from 'jsonwebtoken'\r\n\r\nconst connectDb = () =>{\r\n     mongoose.connect(\"mongodb://127.0.0.1:27017/sunidhiDb\").then((res)=>{\r\n        console.log(`Database is connected with host:-${res.connection.host}`)\r\n    }).catch((err)=>{\r\n        console.log(`************** Database is not connected ***************** `,err)\r\n    })\r\n};\r\n\r\nexport const LoggedInUserOnly = (req,res,next)=>{\r\n    const token  = req.cookies[\"test-token\"];\r\n    if(!token) return res.status(401).json({\r\n        success:false,\r\n        message:\"Unauthorized user,please login !\"\r\n    })\r\n    const decodedData = jwt.verify(token,\"your-secret-key\")\r\n    req.user = decodedData.userId;\r\n\r\n    next()\r\n}\r\n\r\n\r\n \r\n\r\nexport {\r\n    connectDb\r\n}"],"file":"db.dev.js"}